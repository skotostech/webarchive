<!!!!!!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN"><html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<title>Notes from the Dawn of Time</title>		<meta name="Author" content="FreeFrog Designs (ffdesigns.com)">		<link href="article.css" rel="stylesheet">	</head>	<body background="../artwork/skoot_back.jpg" text="black" link="#006633" vlink="#cc3300" alink="#990066" leftmargin="0" marginheight="0" marginwidth="0" topmargin="0">		<center>			<img src="nav/tnav_dawnof.gif" alt="topnav" height="90" width="531" usemap="#tnav_dawnof" align="BOTTOM" border="0" hspace="10" vspace="10"><map name="tnav_dawnof"><area shape="rect" coords="351,65,519,79" href="../games/succession.html" target="_top"><area shape="rect" coords="350,50,519,63" href="../games/eternal-city.html" target="_top"><area shape="rect" coords="348,33,519,48" href="../games/marrach.html" target="_top"><area shape="rect" coords="261,60,328,89" href="../vbulletin/index.html"><area shape="rect" coords="196,4,250,28" href="../storybuilders/Intro.shtml.html" target="_top"><area shape="rect" coords="11,65,181,77" href="bestof.shtml.html"><area shape="rect" coords="11,49,181,63" href="ArticlesArchive.shtml.html"><area shape="rect" coords="11,35,181,47" href="DAWNOF.shtml.html"><area shape="rect" coords="349,7,517,30" href="../games/m59.html" target="_top"><area shape="rect" coords="10,5,182,32" href="show-column.phtml%3Fcolname=playing.html" target="_top"></map><br>			<table width="90%" border="0" cellpadding="2">				<tr>					<td valign="top">						<div align="left">							<p><font color="#006633"><a href="DAWNOF.shtml.html"><img src="nav/snav_dawnof.gif" alt="Series Info..." height="334" width="137" align="right" border="0" hspace="10" vspace="10"></a><b>Notes from the Dawn of Time #24:</b></font></p>							<h2><b>An Introduction to Planning</b></h2>							<p><b><i>by <a href="mailto:richard@mud.co.uk">Richard Bartle<br>										</a>July 31, 2002</i></b></p>							<div class="Section1">								<p>The model I described last time for a mobile AI, wasn&#146;t <i>actually</i> for a mobile AI; it was for a generic AI. When programming mobiles, we can take advantage of a number of useful MUD-specific features:</p>								<ul>									<li>We can use the &#147;real&#148; game world as the world model, because we have direct, up-to-date access to it.									<li>Only free-form input (eg. speech) needs to be parsed; everything else can be tagged in advance. Because we (the game engine) generate the messages ourselves, we can give precise meanings without going through English. The mobile doesn&#146;t have to parse <code>The elephant is advancing towards you menacingly</code> as we can simply tell it [attacking, elephant].									<li>There&#146;s no real need to learn, because mobiles don&#146;t live all that long anyway.									<li>The planner can act as the effectors. Whereas in humans our brains somehow need to tell our muscles to contract in our calves and thighs in just the right way for us to walk, in MUDs we can just call the [east]() or whatever command.								</ul>								<p>This gives a much more program-like model:</p>							</div>						</div>						<div class="Section1" align="center">							<p><img src="artwork/dawnof-24.gif" alt="diagram" height="264" width="398" border="1"></p>						</div>						<div align="left">							<div class="Section1">								<p>Input from the game world is inserted pre-parsed into a sensory buffer. When it&#146;s the mobile&#146;s &#147;turn&#148; to act, its emotional system looks at the buffer. If there&#146;s anything in there that requires action, it interrupts by putting an action at the head of the plan, perhaps something like [handle, <i>event</i>]; otherwise, it checks the planner isn&#146;t looping, and gives it control if not. The planner takes the first action from the plan. If this is a &#147;physical&#148; one, it calls the appropriate game function. If not, it&#146;ll be a mental action (eg. &#147;figure out how to open the door&#148; rather than &#147;get key from bag&#148;) that changes the plan rather than the game world. The planner reads the state of the world directly from the game, instead of from some model of it, although the procedure is moderated so as not to involve cheating (eg. if you&#146;re invisible, it still can&#146;t see you).</p>								<p><b>The plan</b></p>								<p>The core of the system is the <i>plan</i>. This is a basic data structure &#150; a linear list of actions that the mobile intends to perform in sequence. The emotional system is predefined code that defines the general behavioural responses of the mobile, over which it has no control; the planner generates code on the fly in response to the situational needs, which it stores as the plan. I should point out that there <i>are</i> such things as non-linear plans, by the way, but they can be implemented linearly and are more complex than we&#146;re going to need anyway.<br>									<br>									OK, I guess I&#146;d better give an example of how this works...<br>									<br>									Suppose a pixie is minding his own business when he suddenly becomes hungry. His sensory buffer has [hungry] inserted into it. Next tick, his emotional system checks this out. It can either dismiss it or do something about it. This being a happy-go-lucky pixie rather than a lean, mean goblin, it is predisposed to do something about it. It inserts an action at the head of the plan, say [goal, [not, hungry]].<br>									<br>									The planner comes along and sees the goal. It looks through all the actions it knows to see if any of them result in the pixie&#146;s being not hungry. Some can be dismissed because they have side effects vetoed by the emotional system (eg. committing suicide), but the obvious one to take is to eat something. The action [eat, <i>food</i>] has a precondition of [holding, <i>food</i>]. The planner therefore changes the plan to be: [[goal, [holding, <i>food</i>]], [eat, <i>food</i>]].<br>									<br>									Next tick, the emotional system checks the sensory input buffer (finding nothing new), checks out the plan (it&#146;s not stuck) and passes control to the planner. The planner looks at the first element in the plan: [goal, [holding, food]]. It considers all the actions it knows that could cause it to be holding some food, and discovers that it has to pick the food up.<br>									<br>									The process continues. The planner finds that the pixie has to be in the same location as some food in order to pick it up</p>								<blockquote>									<p>[[goal, [same, [location, me], [location, <i>food</i>]]], [get <i>food</i>], [eat <i>food</i>]]</p>								</blockquote>								<p>then it thinks of some food it knows</p>								<blockquote>									<p>[[goal, [same, [location, me], [location, peach2]]], [get peach2], [eat peach2]]</p>								</blockquote>								<p>then it figures out how to reach the food</p>								<blockquote>									<p>[[goto, kitchen], [get peach2], [eat peach2]]</p>								</blockquote>								<p>and so on. It chips away at the first element of the plan, until it eventually gets to something it can just <i>do</i>. The pixie&#146;s planat this stage will be something like:</p>								<blockquote>									<p>[[west], [north], [get, peach2], [eat peach2]].</p>								</blockquote>								<p>He can then execute this plan by performing each action in turn, which will eventually satisfy his original goal of not being hungry.</p>								<p>That was a very simple yet somewhat tiresome example. Fortunately, we can get computers to do it all for is.<br>									<br>									Next time, I&#146;ll begin explaining what use this is.</p>							</div>							<div align="left">								<table width="100%">									<tr>										<td align="center" valign="middle">											<p><b>Recent Discussions on <i>Notes from the Dawn of Time</i>:</b></p>										</td>									</tr>									<tr>										<td align="center" valign="middle">											<p><!--#include file="dawnof-last10.php"-->											</p>										</td>									</tr>									<tr>										<td align="center" valign="middle"><b><a href="http://forum.skotos.net/forumdisplay.php?s=&forumid=33"><img src="artwork/jumpto.gif" alt="jump" height="20" width="98" align="absmiddle" border="0"></a> <a href="http://forum.skotos.net/newthread.php?s=&action=newthread&forumid=33"><img src="artwork/postnew.gif" alt="new" height="20" width="98" align="absmiddle" border="0"></a></b></td>									</tr>								</table>							</div>						</div>					</td>				</tr>				<tr>					<td valign="top"></td>				</tr>			</table>			<p></p>		</center>	</body></html>